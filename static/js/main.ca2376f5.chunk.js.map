{"version":3,"sources":["reportWebVitals.js","context/ContextMenuContext.js","ContextMenu.js","context/ProjectContext.js","Sidebar.js","NodeHelper.js","NodeTemplate.js","modules/EndProgram.js","modules/OnProgramRun.js","modules/Walk.js","modules/Wait.js","modules/If.js","modules/WaitForAudio.js","modules/Wave.js","modules/Turn.js","modules/And.js","modules/False.js","modules/Or.js","modules/True.js","modules/FM_custom.js","Flow.js","ProviderFlow.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ContextMenuContext","createContext","useContextMenu","context","useContext","undefined","Error","ContextMenu","children","React","useState","showPopper","setShowPopper","popperElement","setPopperElement","virtualReference","useRef","usePopper","current","placement","styles","attributes","useMemo","getRect","top","left","right","bottom","width","height","getBoundingClientRect","hide","show","foo","setRect","bbox","Provider","value","ref","node","style","popper","ProjectContext","useProject","textareaStyles","fontSize","resize","controlsStyles","display","position","transform","transformOrigin","getDefaultProject","id","uuidv4","elements","x","y","zoom","Sidebar","nodes","useStoreState","store","edges","visible","setVisible","drawerStyles","padding","transition","getDrawerStyles","setElements","setId","setTransform","createNodeInfo","index","frescoInputs","incomingEdges","filter","edge","target","getIncomingEdges","i","forEach","myEdge","sourceNode","find","getNode","source","inputString","data","frescoid","sourceHandle","push","type","event","parameters","useEffect","project","atob","window","location","hash","substr","JSON","parse","e","console","error","btoa","stringify","map","element","__rf","onChange","useCallback","clearProject","defaultProject","toggleProjectDrawer","downloadApplication","document","createElement","file","Blob","getElementById","href","URL","createObjectURL","download","body","appendChild","click","editable","spellCheck","frescoModules","buildApp","onClick","marginRight","buildElement","title","Object","assign","label","NodeTemplate","props","contextMenu","handleStyle","background","isValidConnection","connection","targetNode","outputs","inputs","targetHandle","className","input","toString","Position","Left","output","Right","memo","buildEndProgram","buildProps","EndProgram","nodeType","selected","buildOnProgramRun","OnProgramRun","buildWalk","Walk","ipAddress","setIP","setEvent","els","el","buildWait","Wait","port","buildIf","If","buildWaitForAudio","WaitForAudio","buildWave","Wave","buildTurn","Turn","buildAnd","And","buildFalse","False","buildOr","Or","buildTrue","True","FM_custom","custom_parameters","onElementClick","log","onLoad","reactFlowInstance","snapToGrid","Math","floor","Flow","nodeTypes","addNode","buildFunction","onNodeDragStop","draggedNode","onPaneClick","onPaneContextMenu","preventDefault","clientY","clientX","FlowContextMenu","items","item","subitem","build","onConnect","params","addEdge","onElementsRemove","elementsToRemove","removeElements","selectNodesOnDrag","snapGrid","zIndex","gap","ProviderFlow","alignItems","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ca2376f5.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createContext, useContext } from \"react\";\n\nexport const ContextMenuContext = createContext();\n\nexport function useContextMenu() {\n  const context = useContext(ContextMenuContext);\n  if (context === undefined) {\n    throw new Error('useCount must be used within a CountProvider')\n  }\n  return context\n}\n","import React, { useMemo, useRef } from \"react\";\nimport { ContextMenuContext } from \"./context/ContextMenuContext\";\nimport { usePopper } from \"react-popper\";\n\nfunction ContextMenu({ children }) {\n  const [showPopper, setShowPopper] = React.useState(null);\n  const [popperElement, setPopperElement] = React.useState();\n  const virtualReference = useRef();\n  const { styles, attributes } = usePopper(virtualReference.current, popperElement, { placement: \"bottom-start\" });\n\n  const context = useMemo(\n    () => ({\n      getRect: () => {\n        if (virtualReference.current == null) {\n          return { top: 0, left: 0, right: 0, bottom: 0, width: 0, height: 0 };\n        }\n\n        return virtualReference.current.getBoundingClientRect();\n      },\n      hide: () => {\n        setShowPopper(null);\n      },\n      show: (foo) => {\n        setShowPopper(foo);\n      },\n      setRect: (bbox) => {\n        virtualReference.current = {\n          getBoundingClientRect: () => bbox,\n        };\n      },\n      setPopperElement,\n    }),\n    []\n  );\n\n  return (\n    <ContextMenuContext.Provider value={context}>\n      {children}\n      <div ref={node => node && setPopperElement(node)} style={styles.popper} {...attributes.popper}>\n        {showPopper}\n      </div>\n    </ContextMenuContext.Provider>\n  );\n}\n\nexport default ContextMenu;\n","import { createContext, useContext } from \"react\";\n\nexport const ProjectContext = createContext();\n\nexport function useProject() {\n  const context = useContext(ProjectContext);\n  if (context === undefined) {\n    throw new Error('useCount must be used within a CountProvider')\n  }\n  return context\n}\n","import React, { useCallback, useMemo, useState, useEffect } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useStoreState } from 'react-flow-renderer';\nimport { useProject } from \"./context/ProjectContext\";\n\nconst textareaStyles = {\n  fontSize: 12,\n  height: \"100%\",\n  resize: \"none\",\n  width: \"100%\",\n};\n\nconst controlsStyles = {\n  display: \"flex\",\n  position: \"absolute\",\n  right: \"100%\",\n  top: -10,\n  transform: \"rotate(-90deg)\",\n  transformOrigin: \"bottom right\",\n};\n\nconst getDrawerStyles = (visible) => ({\n  height: \"100%\",\n  padding: 10,\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  transform: visible ? \"translateX(0)\" : \"translateX(100%)\",\n  transition: \"transform 0.4s ease\",\n  width: 400,\n});\n\nexport const getDefaultProject = () => ({\n  id: uuidv4(),\n  elements: [],\n  transform: {\n    x: 0,\n    y: 0,\n    zoom: 1,\n  },\n});\n\nexport default function Sidebar() {\n  const nodes = useStoreState((store) => store.nodes);\n  const edges = useStoreState((store) => store.edges);\n  const [visible, setVisible] = useState(false);\n  const drawerStyles = useMemo(() => getDrawerStyles(visible), [visible]);\n  const { elements, id, setElements, setId, setTransform, transform } = useProject();\n\n  function getNode(id) {\n    return nodes.find(node => node.id === id);\n  }\n\n  function createNodeInfo(node, index) {\n    let frescoInputs = []; // List of inputs for this node\n    const incomingEdges = getIncomingEdges(node, edges) ?? [];\n    let i = 1;\n    incomingEdges.forEach(myEdge => {\n      let sourceNode = getNode(myEdge.source);\n      let inputString = i + \":\" + sourceNode.data.frescoid + \":\" + myEdge.sourceHandle;\n      frescoInputs.push(inputString);\n      i++;\n    });\n  \n    const template = \n    {\t\n      \"id\" : node.data.frescoid,\n      \"type\" : node.type, \n      \"event\" : node.data.event, \n      \"parameters\" : node.data.parameters ?? [],\n      \"inputs\" : frescoInputs,\n    }\n    return template;\n  }\n\n  function buildApp(){\n    let frescoModules = [];\n    nodes.map((node, index) => {\n        //{Use the index of the node in the map as the integer for the FRESCO ID}\n        node.data.frescoid = index + 1;\n        frescoModules.push(createNodeInfo(node, index));\n        return createNodeInfo(node, index);\n    });\n    return JSON.stringify(\n      {\n        frescoModules: frescoModules.map(element => ({ ...element, __rf: undefined })),\n      },\n      null,\n      2\n    );\n  }\n\n  // Load project from URL\n  useEffect(() => {\n    const project = atob(window.location.hash.substr(1));\n    try {\n      const { elements, id, transform } = JSON.parse(project);\n      setElements(elements);\n      setId(id ?? uuidv4());\n      setTransform(transform);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [setElements, setId, setTransform]);\n\n  // Store project in URL\n  useEffect(() => {\n    window.location.hash = btoa(\n      JSON.stringify({\n        elements: elements.map(element => ({ ...element, __rf: undefined })),\n        id,\n        transform,\n      })\n    );\n  }, [elements, id, transform]);\n\n  const onChange = useCallback(\n    (e) => {\n      try {\n        const { elements, id, transform } = JSON.parse(e.target.value);\n        setElements(elements);\n        setId(id ?? uuidv4());\n        setTransform(transform);\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    [setElements, setId, setTransform]\n  );\n\n  const clearProject = useCallback(() => {\n    const defaultProject = getDefaultProject();\n    setElements(defaultProject.elements);\n    setId(defaultProject.id);\n    setTransform(defaultProject.transform);\n  }, [setElements, setId, setTransform]);\n\n  const toggleProjectDrawer = useCallback(() => setVisible(visible => !visible), []);\n\n  //\n  // downloadApplication() adapted from StackOverflow answer: https://stackoverflow.com/a/44661948\n  //\n  const downloadApplication = useCallback(() => {\n    const element = document.createElement(\"a\");\n    const file = new Blob([document.getElementById('frescoOutput').value], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = \"new_fresco_application.fre\";\n    document.body.appendChild(element);\n    element.click();\n  }, []);\n\n  return (\n    <div style={drawerStyles}>\n      <textarea onChange={onChange} editable=\"false\" spellCheck=\"false\" id=\"frescoOutput\" style={textareaStyles} value={buildApp()} />\n      <div style={controlsStyles}>\n        <button onClick={clearProject} style={{ marginRight: 20 }}>\n          clear\n        </button>\n        <button onClick={downloadApplication} style={{ marginRight: 10 }}>\n          download\n        </button>\n        <button onClick={toggleProjectDrawer}>{visible ? \"hide\" : \"application\"}</button>\n      </div>\n    </div>\n  );\n};\n\nfunction getIncomingEdges(node, edges) {\n  return edges.filter((edge) => {\n    return edge.target === node.id;\n  });\n}","import { v4 as uuidv4 } from 'uuid';\n\nexport default function buildElement(type, title, data, position) {\n    return {\n        id: type + '-' + uuidv4(),\n        type: type,\n        position: position,\n        data: Object.assign({}, { frescoid: \"0\", label: title }, data) \n    };\n}","import React, { useMemo, useCallback } from 'react';\nimport { Position, Handle, useStoreState} from 'react-flow-renderer';\nimport { useContextMenu } from \"./context/ContextMenuContext\";\n\nfunction NodeTemplate(props) {\n  const contextMenu = useContextMenu();\n  const handleStyle = useMemo(\n    () => ({\n      background: `#${props.id.substr(-6)}`,\n    }),\n    [props.id]\n  );\n\n  const nodes = useStoreState((store) => store.nodes);\n  function getNode(id) {\n    return nodes.find(node => node.id === id);\n  }\n\n  // verify connections between modules are using the same string\n  const isValidConnection = (connection) => {\n    let sourceNode = getNode(connection.source);\n    let targetNode = getNode(connection.target);\n    if(!sourceNode.data.outputs || !targetNode.data.inputs) return false; // shouldn't ever happen \n    return (sourceNode.data.outputs[connection.sourceHandle - 1] === targetNode.data.inputs[connection.targetHandle - 1]);\n  }\n  \n  const onClick = useCallback(() => {\n    contextMenu.hide();\n  }, [contextMenu]);\n\n  return (\n    <div className=\"customNode\" title={props.id} onClick={onClick} >\n      <div className=\"customNode_header\"> \n        {props.title ?? props.type}\n      </div>\n      <div className=\"customNode_body\">\n        {props.inputs && (\n          <div className=\"customNode_inputs\">\n            {props.inputs.map((input, index) => (\n              <div key={input} className=\"customNode_item\">\n                <Handle id={(index+1).toString()} position={Position.Left} style={handleStyle} type=\"target\" isValidConnection={isValidConnection}/>\n                {input}\n              </div>\n            ))}\n          </div>\n        )}\n        {props.outputs && (\n          <div className=\"customNode_outputs\">\n            {props.outputs.map((output, index) => (\n              <div key={output} className=\"customNode_item\">\n                <Handle id={(index+1).toString()} position={Position.Right} style={handleStyle} type=\"source\" isValidConnection={isValidConnection}/>\n                {output}\n              </div>\n            ))}\n          </div>\n        )}\n        {props.children}\n      </div>\n  </div>\n  );\n\n}\n\nexport default React.memo(NodeTemplate);\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildEndProgram(buildProps) {\n    return buildElement(\n      \"EndProgram\", \n      \"EndProgram\", \n      {event: \"PUSH\", \n      inputs: [\"Trigger\"]}, \n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst EndProgram = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"EndProgram\"}\n       type={nodeType}\n       inputs={data.inputs}\n\n      />\n    );\n  };\n  export default React.memo(EndProgram);\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildOnProgramRun(buildProps) {\n    return buildElement(\n      \"OnProgramRun\", \n      \"OnProgramRun\", \n      {event: \"INCOMMING_FLOW\", \n      outputs: [\"Trigger\"]}, \n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst OnProgramRun = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"OnProgramRun\"}\n       type={nodeType}\n       outputs={data.outputs}\n       \n      />\n    );\n  };\nexport default OnProgramRun;\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildWalk(buildProps) {\n    return buildElement(\n      \"Walk\", \n      \"Walk\", \n      {event: \"50\", \n      parameters: [\"6\"], \n      outputs: [\"Trigger\"], \n      inputs: [\"Trigger\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst Walk = ({ data, id, selected, nodeType }) => {\n    const [ipAddress, setIP] = useState(data.parameters[0]);\n    const [event, setEvent] = useState(data.event);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [ipAddress],\n              event: event,\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [ipAddress, event, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`Walk: ${ipAddress}in`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Distance (in):</span>\n                    <input onChange={e => setIP(e.target.value)} value={ipAddress}/>\n                </div>\n                <div className=\"customNode_item\">\n                    <span>Speed (0-100):</span>\n                    <input onChange={e => setEvent(e.target.value)} value={event} />\n              </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(Walk);\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildWait(buildProps) {\n    return buildElement(\n      \"Wait\", \n      \"Wait\", \n      {event: \"PULL\", \n      parameters: [\"1000\"], \n      outputs: [\"Trigger\"], \n      inputs: [\"Trigger\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst Wait = ({ data, id, selected, nodeType }) => {\n    const [port, setIP] = useState(data.parameters[0]);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [port],\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [port, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`Wait: ${port}ms`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Milliseconds:</span>\n                    <input onChange={e => setIP(e.target.value)} value={port}/>\n                </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(Wait);\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildIf(buildProps) {\n    return buildElement(\n      \"If\", \n      \"If\", \n      {event: \"PULL\", \n      parameters: [\"N\"], \n      outputs: [\"Trigger\", \"Trigger\"], \n      inputs: [\"Boolean\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst If = ({ data, id, selected, nodeType }) => {\n    const [port, setIP] = useState(data.parameters[0]);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [port],\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [port, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`If`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Negate? (Y/N):</span>\n                    <input onChange={e => setIP(e.target.value)} value={port}/>\n                </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(If);\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildWaitForAudio(buildProps) {\n    return buildElement(\n      \"WaitForAudio\", \n      \"WaitForAudio\", \n      {event: \"PULL\", \n      parameters: [\"1000\"], \n      outputs: [\"Boolean\"], \n      inputs: [\"Trigger\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst WaitForAudio = ({ data, id, selected, nodeType }) => {\n    const [port, setIP] = useState(data.parameters[0]);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [port],\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [port, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`WaitForAudio: ${port}ms`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Milliseconds:</span>\n                    <input onChange={e => setIP(e.target.value)} value={port}/>\n                </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(WaitForAudio);\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildWave(buildProps) {\n    return buildElement(\n      \"Wave\", \n      \"Wave\", \n      {event: \"PULL\", \n      parameters: [\"1000\"], \n      outputs: [\"Trigger\"], \n      inputs: [\"Trigger\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst Wave = ({ data, id, selected, nodeType }) => {\n    const [port, setIP] = useState(data.parameters[0]);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [port],\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [port, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`Wave: ${port}ms`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Milliseconds:</span>\n                    <input onChange={e => setIP(e.target.value)} value={port}/>\n                </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(Wave);\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildTurn(buildProps) {\n    return buildElement(\n      \"Turn\", \n      \"Turn\", \n      {event: \"50\", \n      parameters: [\"90\"], \n      outputs: [\"Trigger\"], \n      inputs: [\"Trigger\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst Turn = ({ data, id, selected, nodeType }) => {\n    const [ipAddress, setIP] = useState(data.parameters[0]);\n    const [event, setEvent] = useState(data.event);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [ipAddress],\n              event: event,\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [ipAddress, event, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`Turn: ${ipAddress} degrees`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Rotation (degrees):</span>\n                    <input onChange={e => setIP(e.target.value)} value={ipAddress}/>\n                </div>\n                <div className=\"customNode_item\">\n                    <span>Speed (0-100):</span>\n                    <input onChange={e => setEvent(e.target.value)} value={event} />\n              </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(Turn);\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildAnd(buildProps) {\n    return buildElement(\n      \"And\", \n      \"And\", \n      {event: \"PUSH\", \n      inputs: [\"Boolean\", \"Boolean\"],\n      outputs: [\"Boolean\"]},\n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst And = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"And\"}\n       type={nodeType}\n       inputs={data.inputs}\n       outputs={data.outputs}\n      />\n    );\n  };\n  export default React.memo(And);\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildFalse(buildProps) {\n    return buildElement(\n      \"False\", \n      \"False\", \n      {event: \"INCOMMING_FLOW\", \n      outputs: [\"Boolean\"]}, \n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst False = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"False\"}\n       type={nodeType}\n       outputs={data.outputs}\n       \n      />\n    );\n  };\nexport default False;\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildOr(buildProps) {\n    return buildElement(\n      \"Or\", \n      \"Or\", \n      {event: \"PUSH\", \n      inputs: [\"Boolean\", \"Boolean\"],\n      outputs: [\"Boolean\"]},\n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst Or = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"Or\"}\n       type={nodeType}\n       inputs={data.inputs}\n       outputs={data.outputs}\n      />\n    );\n  };\n  export default React.memo(Or);\n","import React from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\n\nexport function buildTrue(buildProps) {\n    return buildElement(\n      \"True\", \n      \"True\", \n      {event: \"INCOMMING_FLOW\", \n      outputs: [\"Boolean\"]}, \n      buildProps.position,\n    );\n}\n\n// eslint-disable-next-line\nconst True = ({ data, id, selected, nodeType }) => {\n    return (\n      <NodeTemplate\n       id={id}\n       title={\"True\"}\n       type={nodeType}\n       outputs={data.outputs}\n       \n      />\n    );\n  };\nexport default True;\n","import React, { useState, useEffect } from 'react';\nimport buildElement from '../NodeHelper'\nimport NodeTemplate from '../NodeTemplate';\nimport { useProject } from \"../context/ProjectContext\";\n\nexport function buildFM_custom(buildProps) {\n    return buildElement(\n      \"FM_custom\", \n      \"FM_custom\", \n      {event: \"PULL\", \n      parameters: [], \n      outputs: [\"output1\"], \n      inputs: [\"input1\"], \n      }, \n      buildProps.position,\n      );\n}\n\n// eslint-disable-next-line\nconst FM_custom = ({ data, id, selected, nodeType }) => {\n    const [custom_parameters, setIP] = useState(data.parameters[0]);\n\n    const { setElements } = useProject();\n    useEffect(() => {\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.data = {\n              ...el.data,\n              parameters: [custom_parameters],\n            };\n          }\n\n          return el;\n        })\n      );      \n    }, [custom_parameters, id, setElements]);\n    return (\n        <div>\n          <NodeTemplate\n          id={id}\n          title={`FM_custom: ${custom_parameters}`}\n          type={nodeType}\n          inputs={data.inputs}\n          outputs={data.outputs}\n          >\n            {selected && (\n              <div className=\"customNode_editor\">\n                <div className=\"customNode_item\">\n                    <span>Custom Parameters:</span>\n                    <input onChange={e => setIP(e.target.value)} value={custom_parameters}/>\n                </div>\n            </div>\n\n            )}\n            </NodeTemplate>\n        </div>\n\n    );\n  };\nexport default React.memo(FM_custom);\n","import React, { useCallback } from 'react';\nimport ReactFlow, {\n  addEdge,\n  Background,\n  removeElements,\n  Controls\n} from 'react-flow-renderer';\nimport './provider.css';\nimport { useContextMenu } from './context/ContextMenuContext';\nimport { useProject } from \"./context/ProjectContext\";\n\n/* HELP: Import new fresco modules here! */\nimport EndProgram, {buildEndProgram} from './modules/EndProgram';\nimport OnProgramRun, {buildOnProgramRun} from './modules/OnProgramRun';\nimport Walk, {buildWalk} from './modules/Walk';\nimport Wait, { buildWait } from './modules/Wait';\nimport If, { buildIf } from './modules/If';\nimport WaitForAudio, { buildWaitForAudio } from './modules/WaitForAudio';\nimport Wave, { buildWave } from './modules/Wave';\nimport Turn, {buildTurn} from './modules/Turn';\nimport And, { buildAnd } from './modules/And';\nimport False, { buildFalse } from './modules/False';\nimport Or, { buildOr } from './modules/Or';\nimport True, { buildTrue } from './modules/True';\nimport FM_custom, { buildFM_custom } from './modules/FM_custom';\n\nconst onElementClick = (event, element) => console.log();\nconst onLoad = (reactFlowInstance) => console.log('flow loaded:', reactFlowInstance);\nexport const GRID_SIZE = 10;\n\nfunction snapToGrid(position) {\n  return Math.floor(position / GRID_SIZE) * GRID_SIZE;\n}\n\nexport default function Flow() {\n\n  /* HELP: Add new fresco module types here! */\n  const nodeTypes = {\n    EndProgram: EndProgram,\n    OnProgramRun: OnProgramRun,\n    Walk: Walk,\n    Wait: Wait,\n    WaitForAudio: WaitForAudio,\n    If: If,\n    Wave: Wave,\n    Turn : Turn,\n    And: And,\n    FM_custom: FM_custom,\n    Or:Or,\n    True:True,\n    False:False,\n  };\n\n  const contextMenu = useContextMenu();\n  const { elements, setElements, transform} = useProject();\n  const onConnect = (params) => setElements((els) => addEdge(params, els));\n  const onElementsRemove = (elementsToRemove) =>\n    setElements((els) => removeElements(elementsToRemove, els));\n\n  const addNode = useCallback(\n    (type, buildFunction) => {\n      console.log(type)\n      const position = {\n        x: snapToGrid((contextMenu.getRect().left - transform.x) / transform.zoom),\n        y: snapToGrid((contextMenu.getRect().top - transform.y) / transform.zoom),\n      };\n      const buildProps = {\n        position,\n      }\n      const node = buildFunction(buildProps);\n      console.log(\"Node added\");\n      setElements((elements) => [...elements, node]);\n      contextMenu.hide();\n    },\n    [contextMenu, setElements, transform]\n  );\n\n  const onNodeDragStop = useCallback(\n    (event, draggedNode) => {\n      const position = {\n        x: snapToGrid(draggedNode.position.x),\n        y: snapToGrid(draggedNode.position.y),\n      };\n      setElements((els) =>\n        els.map((el) => {\n          if (el.id === draggedNode.id) {\n            // it's important that you create a new object here\n            // in order to notify react flow about the change\n            el.position = position;\n          }\n          return el;\n        })\n      );\n    },\n    [setElements]\n  );\n\n\n  const onPaneClick = useCallback(() => {\n    contextMenu.hide();\n  }, [contextMenu]);\n\n  const onPaneContextMenu = useCallback(\n    (event) => {\n      event.preventDefault();\n      contextMenu.setRect({ width: 0, height: 0, top: event.clientY, right: 0, bottom: 0, left: event.clientX });\n      contextMenu.show(<FlowContextMenu />);\n    },\n    [contextMenu]\n  );\n  \n  function FlowContextMenu() {\n    return (\n      <ul className=\"contextMenu\">\n        {items.map(item => (\n          <li key={item.label}>\n            {item.label}\n            <span>&#x276F;</span>\n            {item.items && (\n              <ul className=\"contextMenu sub\">\n                {item.items.map(subitem => (\n                  <li key={subitem.label} onClick={() => addNode(subitem.label, subitem.build)}>\n                    {subitem.label}\n                  </li>\n                ))}\n              </ul>\n            )}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n  \n  \n  /* HELP: Add new FRESCO module here. This is the right-click toolbar */\n  const items = [\n    {\n      items: [\n        { label: \"OnProgramRun\", build: buildOnProgramRun },\n        { label: \"Wait\", build: buildWait },\n        { label: \"WaitForAudio\", build: buildWaitForAudio },\n        { label: \"EndProgram\", build: buildEndProgram },\n      ],\n      label: \"Event\",\n    },\n    {\n      items: [\n        { label: \"Walk\", build: buildWalk },\n        { label: \"Turn\", build: buildTurn },\n        { label: \"Wave\", build: buildWave },\n      ],\n      label: \"Actions\",\n    },\n    {\n      items: [\n        { label: \"If\", build: buildIf },\n        { label: \"And\", build: buildAnd },\n        { label: \"Or\", build: buildOr },\n        { label: \"True\", build: buildTrue },\n        { label: \"False\", build: buildFalse },\n      ],\n      label: \"Logic\",\n    },\n  ];\n\n  return (\n    <div className=\"reactflow-wrapper\" >\n      <ReactFlow\n        elements={elements}\n        onElementClick={onElementClick}\n        onConnect={onConnect}\n        onElementsRemove={onElementsRemove}\n        onLoad={onLoad}\n        onNodeDragStop={onNodeDragStop}\n        nodeTypes={nodeTypes}\n        onPaneClick={onPaneClick}\n        onPaneContextMenu={onPaneContextMenu}\n        selectNodesOnDrag={false}\n        snapGrid={[GRID_SIZE, GRID_SIZE]}\n        style={{ zIndex: 0 }}\n      >\n        <Background gap={GRID_SIZE} />\n        <Controls />\n      </ReactFlow>\n  </div>\n  )\n\n  \n};\n\n\n","import React, { useState, useMemo } from 'react';\nimport {\n  ReactFlowProvider,\n} from 'react-flow-renderer';\nimport ContextMenu from \"./ContextMenu\";\nimport Sidebar, { getDefaultProject } from './Sidebar';\nimport Flow from \"./Flow\";\nimport { ProjectContext } from \"./context/ProjectContext\";\nimport './provider.css';\n\nexport const GRID_SIZE = 10;\n\n// define a function called ProviderFlow that takes no arguments () and then runs =>\nconst ProviderFlow = () => { \n  const defaultProject = useMemo(getDefaultProject, []);\n  const [id, setId] = useState(defaultProject.id);\n  const [elements, setElements] = useState(defaultProject.elements);\n  const [transform, setTransform] = useState(defaultProject.transform);\n  const project = { elements, id, setElements, setId, setTransform, transform };\n  return (\n    <ProjectContext.Provider value={project}>\n      <div className=\"providerflow\">\n        <ReactFlowProvider>\n          <ContextMenu>\n            <div\n              style={{\n                      alignItems: \"stretch\",\n                      display: \"flex\",\n                      height: \"100vh\",\n                    }}\n              >\n              <Flow key={project.id}/>\n              <Sidebar />\n            </div>\n          </ContextMenu>\n        </ReactFlowProvider>\n      </div>\n    </ProjectContext.Provider>\n  );\n};\nexport default ProviderFlow;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n//import Flow from './Flow';\nimport ProviderFlow from './ProviderFlow';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ProviderFlow />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}