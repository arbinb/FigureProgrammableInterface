(this.webpackJsonpFigureProgrammableInterface=this.webpackJsonpFigureProgrammableInterface||[]).push([[0],{14:function(e,t,n){},24:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(6),c=n.n(a),s=(n(24),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))}),o=n(3),u=n(4),d=n(2),l=Object(r.createContext)();function j(){var e=Object(r.useContext)(l);if(void 0===e)throw new Error("useCount must be used within a CountProvider");return e}var b=n(36),p=n(1);var m=function(e){var t=e.children,n=i.a.useState(null),a=Object(o.a)(n,2),c=a[0],s=a[1],u=i.a.useState(),j=Object(o.a)(u,2),m=j[0],O=j[1],f=Object(r.useRef)(),v=Object(b.a)(f.current,m,{placement:"bottom-start"}),h=v.styles,g=v.attributes,x=Object(r.useMemo)((function(){return{getRect:function(){return null==f.current?{top:0,left:0,right:0,bottom:0,width:0,height:0}:f.current.getBoundingClientRect()},hide:function(){s(null)},show:function(e){s(e)},setRect:function(e){f.current={getBoundingClientRect:function(){return e}}},setPopperElement:O}}),[]);return Object(p.jsxs)(l.Provider,{value:x,children:[t,Object(p.jsx)("div",Object(d.a)(Object(d.a)({ref:function(e){return e&&O(e)},style:h.popper},g.popper),{},{children:c}))]})},O=n(7),f=Object(r.createContext)();function v(){var e=Object(r.useContext)(f);if(void 0===e)throw new Error("useCount must be used within a CountProvider");return e}var h={fontSize:12,height:"100%",resize:"none",width:"100%"},g={display:"flex",position:"absolute",right:"100%",top:-10,transform:"rotate(-90deg)",transformOrigin:"bottom right"},x=function(){return{id:Object(O.v4)(),elements:[],transform:{x:0,y:0,zoom:1}}};function N(){var e=Object(u.i)((function(e){return e.nodes})),t=Object(u.i)((function(e){return e.edges})),n=Object(r.useState)(!1),i=Object(o.a)(n,2),a=i[0],c=i[1],s=Object(r.useMemo)((function(){return function(e){return{height:"100%",padding:10,position:"absolute",right:0,top:0,transform:e?"translateX(0)":"translateX(100%)",transition:"transform 0.4s ease",width:400}}(a)}),[a]),l=v(),j=l.elements,b=l.id,m=l.setElements,f=l.setId,N=l.setTransform,y=l.transform;function C(n,r){var i,a,c=[],s=null!==(i=function(e,t){return t.filter((function(t){return t.target===e.id}))}(n,t))&&void 0!==i?i:[],o=1;return s.forEach((function(t){var n=function(t){return e.find((function(e){return e.id===t}))}(t.source),r=o+":"+n.data.frescoid+":"+t.sourceHandle;c.push(r),o++})),{id:n.data.frescoid,type:n.type,event:n.data.event,parameters:null!==(a=n.data.parameters)&&void 0!==a?a:[],inputs:c}}Object(r.useEffect)((function(){var e=atob(window.location.hash.substr(1));try{var t=JSON.parse(e),n=t.elements,r=t.id,i=t.transform;m(n),f(null!==r&&void 0!==r?r:Object(O.v4)()),N(i)}catch(a){console.error(a)}}),[m,f,N]),Object(r.useEffect)((function(){window.location.hash=btoa(JSON.stringify({elements:j.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{__rf:void 0})})),id:b,transform:y}))}),[j,b,y]);var T=Object(r.useCallback)((function(e){try{var t=JSON.parse(e.target.value),n=t.elements,r=t.id,i=t.transform;m(n),f(null!==r&&void 0!==r?r:Object(O.v4)()),N(i)}catch(e){console.error(e)}}),[m,f,N]),E=Object(r.useCallback)((function(){var e=x();m(e.elements),f(e.id),N(e.transform)}),[m,f,N]),_=Object(r.useCallback)((function(){return c((function(e){return!e}))}),[]),S=Object(r.useCallback)((function(){var e=document.createElement("a"),t=new Blob([document.getElementById("frescoOutput").value],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="new_fresco_application.fre",document.body.appendChild(e),e.click()}),[]);return Object(p.jsxs)("div",{style:s,children:[Object(p.jsx)("textarea",{onChange:T,editable:"false",spellCheck:"false",id:"frescoOutput",style:h,value:function(){var t=[];return e.map((function(e,n){return e.data.frescoid=n+1,t.push(C(e)),C(e)})),JSON.stringify({frescoModules:t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{__rf:void 0})}))},null,2)}()}),Object(p.jsxs)("div",{style:g,children:[Object(p.jsx)("button",{onClick:E,style:{marginRight:20},children:"clear"}),Object(p.jsx)("button",{onClick:S,style:{marginRight:10},children:"download"}),Object(p.jsx)("button",{onClick:_,children:a?"hide":"application"})]})]})}var y=n(17);n(14);function C(e,t,n,r){return{id:e+"-"+Object(O.v4)(),type:e,position:r,data:Object.assign({},{frescoid:"0",label:t},n)}}function T(e){var t,n=j(),i=Object(r.useMemo)((function(){return{background:"#".concat(e.id.substr(-6))}}),[e.id]),a=Object(u.i)((function(e){return e.nodes}));function c(e){return a.find((function(t){return t.id===e}))}var s=function(e){var t=c(e.source),n=c(e.target);return!(!t.data.outputs||!n.data.inputs)&&t.data.outputs[e.sourceHandle-1]===n.data.inputs[e.targetHandle-1]},o=Object(r.useCallback)((function(){n.hide()}),[n]);return Object(p.jsxs)("div",{className:"customNode",title:e.id,onClick:o,children:[Object(p.jsx)("div",{className:"customNode_header",children:null!==(t=e.title)&&void 0!==t?t:e.type}),Object(p.jsxs)("div",{className:"customNode_body",children:[e.inputs&&Object(p.jsx)("div",{className:"customNode_inputs",children:e.inputs.map((function(e,t){return Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)(u.c,{id:(t+1).toString(),position:u.d.Left,style:i,type:"target",isValidConnection:s}),e]},e)}))}),e.outputs&&Object(p.jsx)("div",{className:"customNode_outputs",children:e.outputs.map((function(e,t){return Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)(u.c,{id:(t+1).toString(),position:u.d.Right,style:i,type:"source",isValidConnection:s}),e]},e)}))}),e.children]})]})}var E=i.a.memo(T);function _(e){return C("EndProgram","EndProgram",{event:"PUSH",inputs:["Trigger"]},e.position)}var S=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"EndProgram",type:r,inputs:t.inputs})},P=i.a.memo(S);function k(e){return C("OnProgramRun","OnProgramRun",{event:"INCOMMING_FLOW",outputs:["Trigger"]},e.position)}var w=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"OnProgramRun",type:r,outputs:t.outputs})};function W(e){return C("Walk","Walk",{event:"50",parameters:["6"],outputs:["Trigger"],inputs:["Trigger"]},e.position)}var F=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=Object(r.useState)(t.event),b=Object(o.a)(j,2),m=b[0],O=b[1],f=v().setElements;return Object(r.useEffect)((function(){f((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u],event:m})),e}))}))}),[u,m,n,f]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"Walk: ".concat(u,"in"),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsxs)("div",{className:"customNode_editor",children:[Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Distance (in):"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]}),Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Speed (0-100):"}),Object(p.jsx)("input",{onChange:function(e){return O(e.target.value)},value:m})]})]})})})},M=i.a.memo(F);function I(e){return C("Wait","Wait",{event:"PULL",parameters:["1000"],outputs:["Trigger"],inputs:["Trigger"]},e.position)}var R=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=v().setElements;return Object(r.useEffect)((function(){j((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u]})),e}))}))}),[u,n,j]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"Wait: ".concat(u,"ms"),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsx)("div",{className:"customNode_editor",children:Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Milliseconds:"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]})})})})},L=i.a.memo(R);function B(e){return C("If","If",{event:"PULL",parameters:["N"],outputs:["Trigger","Trigger"],inputs:["Boolean"]},e.position)}var A=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=v().setElements;return Object(r.useEffect)((function(){j((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u]})),e}))}))}),[u,n,j]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"If",type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsx)("div",{className:"customNode_editor",children:Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Negate? (Y/N):"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]})})})})},U=i.a.memo(A);function z(e){return C("WaitForAudio","WaitForAudio",{event:"PULL",parameters:["1000"],outputs:["Boolean"],inputs:["Trigger"]},e.position)}var H=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=v().setElements;return Object(r.useEffect)((function(){j((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u]})),e}))}))}),[u,n,j]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"WaitForAudio: ".concat(u,"ms"),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsx)("div",{className:"customNode_editor",children:Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Milliseconds:"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]})})})})},J=i.a.memo(H);function D(e){return C("Wave","Wave",{event:"PULL",parameters:["1000"],outputs:["Trigger"],inputs:["Trigger"]},e.position)}var G=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=v().setElements;return Object(r.useEffect)((function(){j((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u]})),e}))}))}),[u,n,j]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"Wave: ".concat(u,"ms"),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsx)("div",{className:"customNode_editor",children:Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Milliseconds:"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]})})})})},X=i.a.memo(G);function V(e){return C("Turn","Turn",{event:"50",parameters:["90"],outputs:["Trigger"],inputs:["Trigger"]},e.position)}var Y=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=Object(r.useState)(t.event),b=Object(o.a)(j,2),m=b[0],O=b[1],f=v().setElements;return Object(r.useEffect)((function(){f((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u],event:m})),e}))}))}),[u,m,n,f]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"Turn: ".concat(u," degrees"),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsxs)("div",{className:"customNode_editor",children:[Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Rotation (degrees):"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]}),Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Speed (0-100):"}),Object(p.jsx)("input",{onChange:function(e){return O(e.target.value)},value:m})]})]})})})},q=i.a.memo(Y);function K(e){return C("And","And",{event:"PUSH",inputs:["Boolean","Boolean"],outputs:["Boolean"]},e.position)}var Q=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"And",type:r,inputs:t.inputs,outputs:t.outputs})},Z=i.a.memo(Q);function $(e){return C("False","False",{event:"INCOMMING_FLOW",outputs:["Boolean"]},e.position)}var ee=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"False",type:r,outputs:t.outputs})};function te(e){return C("Or","Or",{event:"PUSH",inputs:["Boolean","Boolean"],outputs:["Boolean"]},e.position)}var ne=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"Or",type:r,inputs:t.inputs,outputs:t.outputs})},re=i.a.memo(ne);function ie(e){return C("True","True",{event:"INCOMMING_FLOW",outputs:["Boolean"]},e.position)}var ae=function(e){var t=e.data,n=e.id,r=(e.selected,e.nodeType);return Object(p.jsx)(E,{id:n,title:"True",type:r,outputs:t.outputs})};var ce=function(e){var t=e.data,n=e.id,i=e.selected,a=e.nodeType,c=Object(r.useState)(t.parameters[0]),s=Object(o.a)(c,2),u=s[0],l=s[1],j=v().setElements;return Object(r.useEffect)((function(){j((function(e){return e.map((function(e){return e.id===n&&(e.data=Object(d.a)(Object(d.a)({},e.data),{},{parameters:[u]})),e}))}))}),[u,n,j]),Object(p.jsx)("div",{children:Object(p.jsx)(E,{id:n,title:"FM_custom: ".concat(u),type:a,inputs:t.inputs,outputs:t.outputs,children:i&&Object(p.jsx)("div",{className:"customNode_editor",children:Object(p.jsxs)("div",{className:"customNode_item",children:[Object(p.jsx)("span",{children:"Custom Parameters:"}),Object(p.jsx)("input",{onChange:function(e){return l(e.target.value)},value:u})]})})})})},se=i.a.memo(ce),oe=function(e,t){return console.log()},ue=function(e){return console.log("flow loaded:",e)};function de(e){return 10*Math.floor(e/10)}function le(){var e={EndProgram:P,OnProgramRun:w,Walk:M,Wait:L,WaitForAudio:J,If:U,Wave:X,Turn:q,And:Z,FM_custom:se,Or:re,True:ae,False:ee},t=j(),n=v(),i=n.elements,a=n.setElements,c=n.transform,s=Object(r.useCallback)((function(e,n){console.log(e);var r=n({position:{x:de((t.getRect().left-c.x)/c.zoom),y:de((t.getRect().top-c.y)/c.zoom)}});console.log("Node added"),a((function(e){return[].concat(Object(y.a)(e),[r])})),t.hide()}),[t,a,c]),o=Object(r.useCallback)((function(e,t){var n={x:de(t.position.x),y:de(t.position.y)};a((function(e){return e.map((function(e){return e.id===t.id&&(e.position=n),e}))}))}),[a]),d=Object(r.useCallback)((function(){t.hide()}),[t]),l=Object(r.useCallback)((function(e){e.preventDefault(),t.setRect({width:0,height:0,top:e.clientY,right:0,bottom:0,left:e.clientX}),t.show(Object(p.jsx)(b,{}))}),[t]);function b(){return Object(p.jsx)("ul",{className:"contextMenu",children:m.map((function(e){return Object(p.jsxs)("li",{children:[e.label,Object(p.jsx)("span",{children:"\u276f"}),e.items&&Object(p.jsx)("ul",{className:"contextMenu sub",children:e.items.map((function(e){return Object(p.jsx)("li",{onClick:function(){return s(e.label,e.build)},children:e.label},e.label)}))})]},e.label)}))})}var m=[{items:[{label:"OnProgramRun",build:k},{label:"Wait",build:I},{label:"WaitForAudio",build:z},{label:"EndProgram",build:_}],label:"Event"},{items:[{label:"Walk",build:W},{label:"Turn",build:V},{label:"Wave",build:D}],label:"Actions"},{items:[{label:"If",build:B},{label:"And",build:K},{label:"Or",build:te},{label:"True",build:ie},{label:"False",build:$}],label:"Logic"}];return Object(p.jsx)("div",{className:"reactflow-wrapper",children:Object(p.jsxs)(u.g,{elements:i,onElementClick:oe,onConnect:function(e){return a((function(t){return Object(u.f)(e,t)}))},onElementsRemove:function(e){return a((function(t){return Object(u.h)(e,t)}))},onLoad:ue,onNodeDragStop:o,nodeTypes:e,onPaneClick:d,onPaneContextMenu:l,selectNodesOnDrag:!1,snapGrid:[10,10],style:{zIndex:0},children:[Object(p.jsx)(u.a,{gap:10}),Object(p.jsx)(u.b,{})]})})}var je=function(){var e=Object(r.useMemo)(x,[]),t=Object(r.useState)(e.id),n=Object(o.a)(t,2),i=n[0],a=n[1],c=Object(r.useState)(e.elements),s=Object(o.a)(c,2),d=s[0],l=s[1],j=Object(r.useState)(e.transform),b=Object(o.a)(j,2),O=b[0],v={elements:d,id:i,setElements:l,setId:a,setTransform:b[1],transform:O};return Object(p.jsx)(f.Provider,{value:v,children:Object(p.jsx)("div",{className:"providerflow",children:Object(p.jsx)(u.e,{children:Object(p.jsx)(m,{children:Object(p.jsxs)("div",{style:{alignItems:"stretch",display:"flex",height:"100vh"},children:[Object(p.jsx)(le,{},v.id),Object(p.jsx)(N,{})]})})})})})};c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(je,{})}),document.getElementById("root")),s()}},[[31,1,2]]]);
//# sourceMappingURL=main.ca2376f5.chunk.js.map